capsman_manager:
  versionAdded: 1.0.0
  validated: true
  package: capsman
  command: /caps-man manager
  type: setting
  generator:
    url: https://wiki.mikrotik.com/wiki/Manual:CAPsMAN
    tableIndex: 1
  module:
    states: ["present", "reset"]
    default_state: "present"
    supports:
      - facts_verbose_mode
  documentations:
    short_description: CAPsMan Manager Setting Module
    descriptions:
      - This modules manages CAPsMan Maanager Setting on Mikrotik RouterOS network devices
  tests:
    fixtures:
      caps-man_manager_export_verbose: |
        /caps-man manager
        set ca-certificate=none \
            certificate=none \
            enabled=no \
            package-path="" \
            require-peer-certificate=no \
            upgrade-policy=none
    facts:
      asserts:
        - self.assertEqual(result["ca_certificate"], "none")

  options:
    ca_certificate:
      type: str
      choicesIgnored: true

  examples:
    - title: Using Present State
      name: Update Settings
      argument_spec:
        state: present
        config:
          ca_certificate: auto
          enabled: yes
      commands:
        - /caps-man manager set ca-certificate=auto enabled=yes
      post: |
        /caps-man manager
        set ca-certificate=none \
            certificate=auto \
            enabled=yes \
            package-path="" \
            require-peer-certificate=no \
            upgrade-policy=none

