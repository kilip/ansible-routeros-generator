wireless_cap:
  versionAdded: 1.0.0
  package: wireless
  command: /interface wireless cap
  validated: true
  type: setting
  documentations:
    short_description: Wireless CAP Setting
    descriptions:
      - This module manages the Wireless CAP setting of Mikrotik RouterOS network devices.
  generator:
    url: https://wiki.mikrotik.com/wiki/Manual:CAPsMAN
    tableIndex: 0
  module:
    supports: ["facts_verbose_mode"]
    states: ["present", "reset"]
    default_state: present
  options:
    bridge:
      type: str
    interfaces:
      type: list
      elements: "str"
    discovery_interfaces:
      type: list
      elements: "str"
    caps_man_addresses:
      type: list
      elements: "str"
    caps_man_names:
      type: list
      elements: "str"
    caps_man_certificate_common_names:
      type: list
      elements: "str"
    static_virtual:
      type: str
      choices: ["yes", 'no']
      default: "no"
    certificate:
      choicesIgnored: true
  tests:
    fixtures:
      interface_wireless_cap_export_verbose: |
        # sep/05/2020 13:37:38 by RouterOS 6.47.2
        # software id =
        #
        #
        #
        /interface wireless cap
        set bridge=none caps-man-addresses="" caps-man-certificate-common-names="" caps-man-names="" \
            certificate=none discovery-interfaces="" \
            enabled=no interfaces="" lock-to-caps-man=no static-virtual=no
    facts:
      asserts:
        - self.assertEqual(result["bridge"], "none")
        - self.assertEqual(result["certificate"], "none")

  examples:
    # state present
    - title: Change Wireless CAP Setting
      name: Configure Wireless CAP
      argument_spec:
        config:
          interfaces:
            - wlan1
            - wlan2
        state: present
      commands:
        - /interface wireless cap set interfaces=wlan1,wlan2
      pre: |
        /interface wireless cap
        set interface=wlan1,wlan2
      post: |
        /interface wireless cap
        set interface=wlan-new